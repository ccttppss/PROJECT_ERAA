# E-commerce Review Analysis System (Sequential Chain)

[![Python 3.9+](https://img.shields.io/badge/python-3.9+-blue.svg)](https://www.python.org/downloads/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

**ë‹¨ì¼ LLM ê¸°ë°˜ì˜ ìˆœì°¨ì  í”„ë¡¬í”„íŠ¸ ì²´ì¸(Sequential Prompt Chain)** ì•„í‚¤í…ì²˜ë¥¼ í†µí•´ ë°ì´í„° ë¶„ì„ë¶€í„° ì‹¤í–‰ ê³„íš ìˆ˜ë¦½ê¹Œì§€ì˜ **ì‚¬ê³  ê³¼ì •(Chain of Thought)** ì„ **ìë™í™”**í•˜ëŠ” ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

**í•˜ë‚˜ì˜ LLMì´ ì „ì²´ ë§¥ë½(Context)ì„ ìœ ì§€**í•˜ë©° **ì´ì»¤ë¨¸ìŠ¤ ê³ ê° ë¦¬ë·°(Amazon ë¦¬ë·°)ë¥¼ ì‹¬ì¸µ ë¶„ì„**í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ë‹¨ì ˆ ì—†ëŠ” ë…¼ë¦¬ì  íë¦„ì„ ê°€ì§„ **ë¹„ì¦ˆë‹ˆìŠ¤ ì¸ì‚¬ì´íŠ¸**ì™€ **êµ¬ì²´ì ì¸ ê°œì„  ê³„íš**ì„ ë„ì¶œí•©ë‹ˆë‹¤.

> âš ï¸ **ë°ì´í„°ì…‹ ë‹¤ìš´ë¡œë“œ í•„ìš”**: ì´ ì €ì¥ì†ŒëŠ” ëŒ€ìš©ëŸ‰ ë°ì´í„°ì…‹ íŒŒì¼ì„ í¬í•¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì•„ë˜ [ë°ì´í„°ì…‹ ì¤€ë¹„](#-ë°ì´í„°ì…‹-ì¤€ë¹„) ì„¹ì…˜ì„ ì°¸ì¡°í•˜ì„¸ìš”.

## ğŸ“Š í”„ë¡œì íŠ¸ ê°œìš”

### í•´ê²°í•˜ëŠ” ë¬¸ì œ

**ê¸°ì¡´ ë¬¸ì œì :**
- ê°œë³„ ë¶„ì„ ë„êµ¬ì˜ íŒŒí¸í™”ë¡œ ì¸í•œ ë¬¸ë§¥(Context) ì†ì‹¤
- ë‹¨ìˆœ í†µê³„ì™€ ì‹¬ì¸µ ë¶„ì„ ê°„ì˜ ë…¼ë¦¬ì  ì—°ê²° ê³ ë¦¬ ë¶€ì¬
- ë¶„ì„ ê²°ê³¼ê°€ êµ¬ì²´ì ì¸ "ì‹¤í–‰(Action)"ìœ¼ë¡œ ì´ì–´ì§€ì§€ ì•ŠìŒ

**ì œê³µí•˜ëŠ” ê°€ì¹˜:**
- âœ… **ë¬¸ë§¥ ìœ ì§€(Context Retention)**: ì´ˆê¸° ë°ì´í„° í†µê³„ê°€ ìµœì¢… ë¦¬í¬íŠ¸ê¹Œì§€ ì¼ê´€ë˜ê²Œ ë°˜ì˜
- âœ… **ì—°ì†ì  ì‚¬ê³ (Chain of Thought)**: ì¸ì‚¬ì´íŠ¸ â†’ ì›ì¸ ë¶„ì„ â†’ í•´ê²°ì±…ìœ¼ë¡œ ì´ì–´ì§€ëŠ” ë…¼ë¦¬ì  íë¦„
- âœ… **íš¨ìœ¨ì„±**: ë‹¨ì¼ LLM ì„¸ì…˜ í™œìš©ìœ¼ë¡œ í† í° ë¹„ìš© ìµœì í™” ë° êµ¬ì¡° ë‹¨ìˆœí™”
- âœ… **ABSA í†µí•©**: Rule-base ë¶„ì„ê³¼ LLM ì¶”ë¡ ì˜ í•˜ì´ë¸Œë¦¬ë“œ ê²°í•©
- âœ… **ìë™í™”ëœ ë¦¬í¬íŒ…**: ê²½ì˜ì§„ ì˜ì‚¬ê²°ì •ì„ ìœ„í•œ ì˜¬ì¸ì› ë¦¬í¬íŠ¸ ìƒì„±

## ğŸ“¦ ë°ì´í„°ì…‹ ì¤€ë¹„

ì´ ì €ì¥ì†ŒëŠ” ëŒ€ìš©ëŸ‰ ë°ì´í„°ì…‹ íŒŒì¼ì„ í¬í•¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì‚¬ìš©í•˜ê¸° ì „ì— ë°ì´í„°ë¥¼ ë‹¤ìš´ë¡œë“œí•´ì•¼ í•©ë‹ˆë‹¤.

### Amazon Review Polarity Dataset (ì¶”ì²œ)

```bash
# datasets/ ë””ë ‰í† ë¦¬ë¡œ ì´ë™
cd datasets/

# ë°ì´í„°ì…‹ ë‹¤ìš´ë¡œë“œ (657 MB)
wget [https://s3.amazonaws.com/fast-ai-nlp/amazon_review_polarity_csv.tgz](https://s3.amazonaws.com/fast-ai-nlp/amazon_review_polarity_csv.tgz)

# ì••ì¶• í•´ì œ
tar -xzf amazon_review_polarity_csv.tgz

# test.csv (168MB) ìƒì„±ë¨
```

### ë°ì´í„° í˜•ì‹

ë¦¬ë·° ë°ì´í„°ëŠ” JSON Lines í˜•ì‹ì´ì–´ì•¼ í•©ë‹ˆë‹¤:

```json
{"overall": 5.0, "reviewText": "Great product!", "summary": "Excellent", "reviewTime": "01 1, 2024", "asin": "B001234567"}
{"overall": 2.0, "reviewText": "Not good", "summary": "Disappointed", "reviewTime": "01 2, 2024", "asin": "B001234567"}
```

## âœ¨ ì£¼ìš” ê¸°ëŠ¥

- âœ… **Sequential Chain Analysis**: ë‹¨ê³„ë³„ ë¶„ì„ ê²°ê³¼ê°€ ë‹¤ìŒ ë‹¨ê³„ì˜ ì…ë ¥ìœ¼ë¡œ í™œìš©ë˜ëŠ” ì²´ì¸ êµ¬ì¡°
- âœ… **Aspect ê¸°ë°˜ ê°ì„± ë¶„ì„ (ABSA)**: ì œí’ˆ ì¸¡ë©´ë³„ ì„¸ë¶€ í†µê³„ ì‚°ì¶œ (Rule-based ì „ì²˜ë¦¬)
- âœ… **Deep Insight Extraction**: í†µê³„ ë°ì´í„°ë¥¼ ë°”íƒ•ìœ¼ë¡œ LLMì´ ì‹¬ì¸µ ë¬¸ì œì  ë„ì¶œ
- âœ… **Logical Action Planning**: ë„ì¶œëœ ë¬¸ì œì ì— ê¸°ë°˜í•œ ë…¼ë¦¬ì  ì‹¤í–‰ ê³„íš ìˆ˜ë¦½
- âœ… **Integrated Reporting**: ì „ì²´ ë¶„ì„ íë¦„ì„ ìš”ì•½í•œ ê²½ì˜ì§„ ë³´ê³ ì„œ ìë™ ìƒì„±
- âœ… **ì‹œê°í™”**: ë¶„ì„ ê²°ê³¼ì˜ ì§ê´€ì  ì´í•´ë¥¼ ë•ëŠ” 4ì¢… ì°¨íŠ¸ ìƒì„±
- âœ… **ì›¹ ì¸í„°í˜ì´ìŠ¤**: Streamlit ëŒ€ì‹œë³´ë“œë¥¼ í†µí•œ ê°„í¸í•œ ì‚¬ìš©

## ğŸš€ ë¹ ë¥¸ ì‹œì‘

### ë°©ë²• 1: ë¡œì»¬ ì„¤ì¹˜ + ì›¹ ì¸í„°í˜ì´ìŠ¤

```bash
# 1. ê°€ìƒ í™˜ê²½ ìƒì„±
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate

# 2. íŒ¨í‚¤ì§€ ì„¤ì¹˜ (ì›¹ ì¸í„°í˜ì´ìŠ¤ í¬í•¨)
pip install -e ".[web]"

# 3. ì›¹ ì¸í„°í˜ì´ìŠ¤ ì‹¤í–‰
streamlit run scripts/web_interface.py
# ë¸Œë¼ìš°ì €: http://localhost:8501
```

### ë°©ë²• 2: CLI ëª…ë ¹ì–´

```bash
# íŒ¨í‚¤ì§€ ì„¤ì¹˜
pip install -e .

# ë¦¬ë·° ë¶„ì„ (ë°ì´í„°ì…‹ ë‹¤ìš´ë¡œë“œ í›„ ì‹¤í–‰)
python scripts/run_analysis.py --data-path datasets/test.csv --limit 100
```

### Ollama ì„¤ì • (ë¡œì»¬ LLM)

```bash
# Ollama ì„¤ì¹˜ ([https://ollama.com](https://ollama.com))

# gpt-oss:20b ëª¨ë¸ ë‹¤ìš´ë¡œë“œ
ollama pull gpt-oss:20b

# Ollama ì„œë²„ ì‹¤í–‰
ollama serve
```

### ê¸°ë³¸ ë¶„ì„ ì‹¤í–‰

```bash
python scripts/run_analysis.py \
    --data-path datasets/test.csv \
    --limit 100 \
    --output output/results.json
```

**ê²°ê³¼**:
```
output/
â”œâ”€â”€ results.json           # ì²´ì¸ ë¶„ì„ ì „ì²´ ê²°ê³¼
â””â”€â”€ charts/                # ì‹œê°í™” ì°¨íŠ¸
    â”œâ”€â”€ rating_distribution.png
    â”œâ”€â”€ time_series.png
    â”œâ”€â”€ aspect_sentiment.png
    â””â”€â”€ sentiment_pie.png
```

## ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### Sequential Prompt Chain êµ¬ì¡°

**í•˜ë‚˜ì˜ ë¶„ì„ ì²´ì¸(Analysis Chain)** ì´ ë‹¨ê³„ë¥¼ ìˆœì°¨ì ìœ¼ë¡œ ë°Ÿì•„ë‚˜ê°€ëŠ” êµ¬ì¡°ì…ë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          CLI / Web Interface                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          Analysis Chain Controller          â”‚
â”‚   (Manages Context & Prompt Flow)           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          Sequential Steps (Logic)           â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚    â”‚ Step 1:  â”‚      â”‚ Step 2:  â”‚           â”‚
â”‚    â”‚ Stats &  â”‚ ===> â”‚ Insight  â”‚           â”‚
â”‚    â”‚ Preproc  â”‚      â”‚Extract(LLM)          â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                           â”‚ (Context Pass)  â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”           â”‚
â”‚    â”‚ Step 4:  â”‚      â”‚ Step 3:  â”‚           â”‚
â”‚    â”‚ Report   â”‚ <=== â”‚ Action   â”‚           â”‚
â”‚    â”‚Gen (LLM) â”‚      â”‚Plan (LLM)â”‚           â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      Service Layer (ê³µí†µ ì„œë¹„ìŠ¤)             â”‚
â”‚    LLM Service Â· Visualization              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ë°ì´í„° í”Œë¡œìš° (Chain of Thought)

ê° ë‹¨ê³„ì˜ ì¶œë ¥(Output)ì€ ë‹¤ìŒ ë‹¨ê³„ì˜ ì…ë ¥(Input Context)ì´ ë˜ì–´ ë¶„ì„ì˜ ê¹Šì´ë¥¼ ë”í•©ë‹ˆë‹¤.

```
[Raw Data]
    â†“
[Step 1] í†µê³„ ë° ì „ì²˜ë¦¬ (Python Native)
    â”‚  Output: ê¸°ë³¸ í†µê³„, ABSA ë°ì´í„°
    â†“
[Step 2] ì¸ì‚¬ì´íŠ¸ ì¶”ì¶œ (LLM Prompt 1)
    â”‚  Input: í†µê³„ ë°ì´í„°
    â”‚  Output: í•µì‹¬ ë¬¸ì œì (Pain Points) & ê°•ì 
    â†“
[Step 3] ì‹¤í–‰ ê³„íš ìˆ˜ë¦½ (LLM Prompt 2)
    â”‚  Input: [Step 2 ê²°ê³¼] + í†µê³„
    â”‚  Output: ìš°ì„ ìˆœìœ„ë³„ ì¡°ì¹˜ ê³„íš (Action Plan)
    â†“
[Step 4] ìµœì¢… ë¦¬í¬íŠ¸ ìƒì„± (LLM Prompt 3)
    â”‚  Input: [Step 2] + [Step 3] + í†µê³„
    â”‚  Output: ê²½ì˜ì§„ ìš”ì•½ ë¦¬í¬íŠ¸ (Markdown/JSON)
```

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
agentic_ai/
â”œâ”€â”€ src/                     â­ ëª¨ë“  ì†ŒìŠ¤ ì½”ë“œ
â”‚   â”œâ”€â”€ chains/              # ë¶„ì„ ì²´ì¸ ë¡œì§
â”‚   â”‚   â”œâ”€â”€ analysis_chain.py # ë©”ì¸ ì‹œí€€ì…œ ì²´ì¸ ì»¨íŠ¸ë¡¤ëŸ¬
â”‚   â”‚   â””â”€â”€ steps/           # ê° ë¶„ì„ ë‹¨ê³„ë³„ ëª¨ë“ˆ
â”‚   â”œâ”€â”€ core/                # ê¸°ë³¸ í”„ë ˆì„ì›Œí¬
â”‚   â”œâ”€â”€ services/            # LLM, ì‹œê°í™” ì„œë¹„ìŠ¤
â”‚   â”œâ”€â”€ utils/               # ë¡œê±°, ì—ëŸ¬ í•¸ë“¤ëŸ¬
â”‚   â”œâ”€â”€ data/                # ë°ì´í„° ë¡œë” ë° ì „ì²˜ë¦¬
â”‚   â”œâ”€â”€ prompts/             # ë‹¨ê³„ë³„ í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿ (Jinja2)
â”‚   â””â”€â”€ config/              # ì„¤ì • íŒŒì¼ (llm_config.yaml)
â”‚
â”œâ”€â”€ datasets/                # ë°ì´í„°ì…‹ (ë‹¤ìš´ë¡œë“œ í•„ìš”)
â”œâ”€â”€ scripts/                 # ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸
â”œâ”€â”€ README.md                # í”„ë¡œì íŠ¸ ë¬¸ì„œ
â””â”€â”€ requirements.txt         # ì˜ì¡´ì„± ëª©ë¡
```

## ğŸ“– ì‚¬ìš©ë²•

### Python

```python
from chains.analysis_chain import ReviewAnalysisChain

# Chain ì´ˆê¸°í™”
chain = ReviewAnalysisChain(
    config={'output_dir': 'output'},
    llm_config_path='src/config/llm_config.yaml'
)

# ì²´ì¸ ì‹¤í–‰ (ìˆœì°¨ì  ì²˜ë¦¬)
result = chain.execute_chain(
    data_path='datasets/test.csv',
    product_id='B0123456',
    limit=500
)

# ê²°ê³¼ í™•ì¸
print(f"Insights: {len(result['insights']['pain_points'])} pain points identified")
print(f"Action Plan: {len(result['action_plan']['quick_wins'])} quick wins generated")
```

## âš¡ ì„±ëŠ¥ ìµœì í™”

- **Context Optimization**: ê° ë‹¨ê³„ë³„ë¡œ ê¼­ í•„ìš”í•œ ì •ë³´ë§Œ ë‹¤ìŒ í”„ë¡¬í”„íŠ¸ë¡œ ì „ë‹¬í•˜ì—¬ í† í° ë¹„ìš© ì ˆê°
- **Hybrid Processing**: ìˆ˜ì¹˜ ê³„ì‚°ì´ í•„ìš”í•œ í†µê³„/ABSAëŠ” Pythonìœ¼ë¡œ ë¹ ë¥´ê²Œ ì²˜ë¦¬í•˜ê³ , ì¶”ë¡ ì´ í•„ìš”í•œ ë¶€ë¶„ë§Œ LLM ì‚¬ìš©
- **Single Pass**: ë°ì´í„°ë¥¼ ì—¬ëŸ¬ ë²ˆ í›‘ì§€ ì•Šê³  íš¨ìœ¨ì ì¸ íŒŒì´í”„ë¼ì¸ìœ¼ë¡œ ì²˜ë¦¬

## ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ

- **Python 3.9+**
- **pandas**: ë°ì´í„° ì „ì²˜ë¦¬ ë° í†µê³„
- **jinja2**: í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿ ê´€ë¦¬
- **Ollama**: ë¡œì»¬ LLM (gpt-oss:20b ë“±) ì¶”ë¡  ì—”ì§„

## ğŸ“ ë¼ì´ì„ ìŠ¤

MIT License - ììœ ë¡­ê²Œ ì‚¬ìš©, ìˆ˜ì •, ë°°í¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

**Version**: 2.0.0
**Last Updated**: 2025-10-19
**Status**: Production Ready âœ…
